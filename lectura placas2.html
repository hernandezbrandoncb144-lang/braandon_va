<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lectura de Placas</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .header h1 {
            color: #d35400;
            font-size: clamp(2rem, 4vw, 3rem);
            margin-bottom: 15px;
            font-weight: 700;
        }

        .header p {
            color: #666;
            font-size: clamp(1rem, 2vw, 1.2rem);
        }

        .btn-volver {
            display: inline-block;
            background: linear-gradient(135deg, #ff9a56 0%, #ff6a3d 100%);
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 5px 15px rgba(211, 84, 0, 0.3);
        }

        .btn-volver:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(211, 84, 0, 0.4);
        }

        .content-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        .content-section h2 {
            color: #d35400;
            font-size: clamp(1.5rem, 3vw, 2rem);
            margin-bottom: 25px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .icon {
            font-size: 2rem;
        }

        .code-block {
            background: #2d2d2d;
            border-radius: 15px;
            padding: 25px;
            overflow-x: auto;
            position: relative;
        }

        .code-block pre {
            margin: 0;
            color: #f8f8f2;
            font-family: 'Courier New', monospace;
            font-size: clamp(0.85rem, 1.5vw, 1rem);
            line-height: 1.6;
        }

        .code-block code {
            display: block;
        }

        .keyword {
            color: #ff79c6;
        }

        .string {
            color: #f1fa8c;
        }

        .function {
            color: #50fa7b;
        }

        .comment {
            color: #6272a4;
            font-style: italic;
        }

        .number {
            color: #bd93f9;
        }

        .glosario {
            display: grid;
            gap: 20px;
        }

        .funcion-card {
            background: linear-gradient(135deg, #fff5eb 0%, #ffe8d6 100%);
            border-radius: 12px;
            padding: 25px;
            border-left: 5px solid #ff6a3d;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .funcion-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 20px rgba(211, 84, 0, 0.2);
        }

        .funcion-card h3 {
            color: #d35400;
            font-size: 1.3rem;
            margin-bottom: 12px;
            font-weight: 600;
            font-family: 'Courier New', monospace;
        }

        .funcion-card p {
            color: #555;
            line-height: 1.7;
            margin-bottom: 12px;
        }

        .parametros {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 12px;
        }

        .parametros strong {
            color: #d35400;
            display: block;
            margin-bottom: 8px;
        }

        .parametros ul {
            margin-left: 20px;
            color: #666;
        }

        .parametros li {
            margin-bottom: 5px;
        }

        .tag {
            display: inline-block;
            background: #ff6a3d;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-right: 8px;
            margin-top: 8px;
        }

        .ejemplo-box {
            background: #fff9f0;
            border-left: 4px solid #ff9a56;
            padding: 15px;
            margin-top: 10px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            color: #555;
        }

        @media (max-width: 768px) {
            .header, .content-section {
                padding: 25px;
            }

            .code-block {
                padding: 15px;
            }

            .funcion-card {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .header, .content-section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç Lectura de Placas 2</h1>
            <p>Sistema avanzado de detecci√≥n y lectura de placas vehiculares con preprocesamiento mejorado</p>
            <a href="index.html" class="btn-volver">‚Üê Volver al inicio</a>
        </div>

        <div class="content-section">
            <h2><span class="icon">üíª</span>C√≥digo del Ejemplo</h2>
            <div class="code-block">
                <pre>
import cv2
import pytesseract

# Ruta correcta del ejecutable
pytesseract.pytesseract.tesseract_cmd = r"C:\Users\MATUTINO\AppData\Local\Programs\Tesseract-OCR\tesseract.exe"

# 1. Cargar imagen
img = cv2.imread("placas_colombia_mesa_de_trabajo_1.jpg")

# 2. Obtener tama√±o
alto, ancho, _ = img.shape

# 3. Zona del recorte (letras grandes)
y1 = int(alto * 0.25)
y2 = int(alto * 0.75)
x1 = int(ancho * 0.15)
x2 = int(ancho * 0.95)
recorte = img[y1:y2, x1:x2]

# --- PREPROCESAMIENTO MEJORADO ---
gris = cv2.cvtColor(recorte, cv2.COLOR_BGR2GRAY)
gris = cv2.convertScaleAbs(gris, alpha=2.0, beta=0)
blur = cv2.GaussianBlur(gris, (5, 5), 0)
_, binaria = cv2.threshold(blur, 0, 255, cv2.THRESH_BINARY_INV + cv2.THRESH_OTSU)
binaria_grande = cv2.resize(binaria, None, fx=2, fy=2, interpolation=cv2.INTER_CUBIC)

# OCR con whitelist y modo simple
config = r'--psm 7 -c tessedit_char_whitelist=ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'

texto = pytesseract.image_to_string(binaria_grande, config=config)

# Limpiar texto
placa = texto.strip().replace(" ", "").replace("\n", "")

print("Placa detectada:", placa)

# Mostrar resultados
cv2.imshow("Recorte", recorte)
cv2.imshow("Binaria", binaria)
cv2.imshow("Binaria Grande", binaria_grande)
cv2.waitKey(0)
</pre>
            </div>
        </div>

        <div class="content-section">
            <h2><span class="icon">üìö</span>Glosario de Funciones</h2>
            <div class="glosario">
                
                <div class="funcion-card">
                    <h3>cv2.imread()</h3>
                    <span class="tag">OpenCV</span>
                    <p>Carga la imagen que contiene la placa vehicular. Esta imagen ser√° procesada mediante m√∫ltiples t√©cnicas de preprocesamiento para mejorar la precisi√≥n del OCR.</p>
                    <div class="parametros">
                        <strong>Par√°metros:</strong>
                        <ul>
                            <li><code>filename</code>: "placas_colombia_mesa_de_trabajo_1.jpg"</li>
                        </ul>
                        <strong>Retorna:</strong>
                        <ul>
                            <li>Matriz NumPy con la imagen en formato BGR</li>
                        </ul>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>.shape</h3>
                    <span class="tag">NumPy</span>
                    <span class="tag">Atributo</span>
                    <p>Atributo que retorna las dimensiones de la imagen (alto, ancho, canales). Se usa para calcular la zona de recorte de forma proporcional.</p>
                    <div class="parametros">
                        <strong>Retorna tupla:</strong>
                        <div class="ejemplo-box">
                            alto, ancho, _ = img.shape<br><br>
                            
                            ‚Ä¢ alto: N√∫mero de filas (altura en p√≠xeles)<br>
                            ‚Ä¢ ancho: N√∫mero de columnas (ancho en p√≠xeles)<br>
                            ‚Ä¢ _: N√∫mero de canales (3 para BGR, se ignora)
                        </div>
                        <strong>Ejemplo:</strong>
                        <ul>
                            <li>Imagen 800x600: shape = (600, 800, 3)</li>
                        </ul>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>int()</h3>
                    <span class="tag">Python</span>
                    <p>Convierte valores flotantes a enteros. Se usa para calcular las coordenadas de recorte como porcentajes de la imagen.</p>
                    <div class="parametros">
                        <strong>C√°lculo de zona de recorte:</strong>
                        <div class="ejemplo-box">
                            <strong>Coordenadas verticales (Y):</strong><br>
                            y1 = int(alto * 0.25) ‚Üí 25% desde arriba<br>
                            y2 = int(alto * 0.75) ‚Üí 75% desde arriba<br>
                            ‚Üí Recorta el 50% central vertical<br><br>
                            
                            <strong>Coordenadas horizontales (X):</strong><br>
                            x1 = int(ancho * 0.15) ‚Üí 15% desde la izquierda<br>
                            x2 = int(ancho * 0.95) ‚Üí 95% desde la izquierda<br>
                            ‚Üí Recorta el 80% central horizontal
                        </div>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>Slicing [y1:y2, x1:x2]</h3>
                    <span class="tag">NumPy</span>
                    <span class="tag">Operador</span>
                    <p>Recorta la regi√≥n de inter√©s de la imagen donde se encuentra la placa. Elimina bordes y fondo innecesarios para mejorar el OCR.</p>
                    <div class="parametros">
                        <strong>Sintaxis:</strong>
                        <div class="ejemplo-box">
                            recorte = img[y1:y2, x1:x2]<br><br>
                            
                            ‚Ä¢ [y1:y2] ‚Üí Filas (altura)<br>
                            ‚Ä¢ [x1:x2] ‚Üí Columnas (ancho)<br>
                            ‚Ä¢ Extrae solo la zona central de la placa
                        </div>
                        <strong>Ventajas:</strong>
                        <ul>
                            <li>Reduce √°rea de procesamiento</li>
                            <li>Elimina ruido del fondo</li>
                            <li>Enfoca en los caracteres de la placa</li>
                        </ul>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>cv2.cvtColor()</h3>
                    <span class="tag">OpenCV</span>
                    <p>Convierte la imagen recortada a escala de grises. Primer paso del preprocesamiento para simplificar la imagen.</p>
                    <div class="parametros">
                        <strong>Par√°metros:</strong>
                        <ul>
                            <li><code>src</code>: Recorte de la imagen</li>
                            <li><code>code</code>: cv2.COLOR_BGR2GRAY</li>
                        </ul>
                        <strong>Funci√≥n:</strong>
                        <ul>
                            <li>Elimina informaci√≥n de color</li>
                            <li>Reduce de 3 canales a 1 canal</li>
                            <li>Facilita procesamiento posterior</li>
                        </ul>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>cv2.convertScaleAbs()</h3>
                    <span class="tag">OpenCV</span>
                    <p>Ajusta el contraste y brillo de la imagen. Mejora la visibilidad de los caracteres de la placa antes del OCR.</p>
                    <div class="parametros">
                        <strong>Par√°metros:</strong>
                        <ul>
                            <li><code>src</code>: Imagen en escala de grises</li>
                            <li><code>alpha</code>: 2.0 - Factor de contraste</li>
                            <li><code>beta</code>: 0 - Ajuste de brillo</li>
                        </ul>
                        <strong>F√≥rmula:</strong>
                        <div class="ejemplo-box">
                            nuevo_pixel = alpha * pixel_original + beta<br><br>
                            
                            alpha = 2.0 ‚Üí Duplica el contraste<br>
                            beta = 0 ‚Üí Sin cambio de brillo<br>
                            ‚Üí Caracteres m√°s definidos
                        </div>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>cv2.GaussianBlur()</h3>
                    <span class="tag">OpenCV</span>
                    <p>Aplica un desenfoque gaussiano para reducir el ruido de la imagen. Suaviza la imagen antes de la binarizaci√≥n.</p>
                    <div class="parametros">
                        <strong>Par√°metros:</strong>
                        <ul>
                            <li><code>src</code>: Imagen con contraste mejorado</li>
                            <li><code>ksize</code>: (5, 5) - Tama√±o del kernel</li>
                            <li><code>sigmaX</code>: 0 - Desviaci√≥n est√°ndar (auto)</li>
                        </ul>
                        <strong>Funci√≥n:</strong>
                        <div class="ejemplo-box">
                            Kernel (5,5):<br>
                            ‚Üí Aplica desenfoque en √°rea de 5x5 p√≠xeles<br>
                            ‚Üí Elimina ruido y manchas peque√±as<br>
                            ‚Üí Prepara imagen para umbralizaci√≥n
                        </div>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>cv2.threshold() con THRESH_OTSU</h3>
                    <span class="tag">OpenCV</span>
                    <p>Aplica umbralizaci√≥n autom√°tica usando el m√©todo de Otsu. Separa autom√°ticamente los caracteres del fondo sin necesidad de especificar un umbral manual.</p>
                    <div class="parametros">
                        <strong>Par√°metros:</strong>
                        <ul>
                            <li><code>src</code>: Imagen desenfocada</li>
                            <li><code>thresh</code>: 0 (Otsu calcula autom√°ticamente)</li>
                            <li><code>maxval</code>: 255 - Valor m√°ximo</li>
                            <li><code>type</code>: THRESH_BINARY_INV + THRESH_OTSU</li>
                        </ul>
                        <strong>THRESH_BINARY_INV:</strong>
                        <div class="ejemplo-box">
                            ‚Ä¢ Invierte los colores<br>
                            ‚Ä¢ Caracteres ‚Üí Blanco (255)<br>
                            ‚Ä¢ Fondo ‚Üí Negro (0)<br>
                            ‚Ä¢ Mejor para OCR
                        </div>
                        <strong>THRESH_OTSU:</strong>
                        <ul>
                            <li>Calcula umbral √≥ptimo autom√°ticamente</li>
                            <li>Analiza histograma de la imagen</li>
                            <li>No requiere ajuste manual</li>
                        </ul>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>cv2.resize() con INTER_CUBIC</h3>
                    <span class="tag">OpenCV</span>
                    <p>Ampl√≠a la imagen binarizada al doble de su tama√±o usando interpolaci√≥n c√∫bica. Mejora la precisi√≥n del OCR al proporcionar m√°s p√≠xeles para analizar.</p>
                    <div class="parametros">
                        <strong>Par√°metros:</strong>
                        <ul>
                            <li><code>src</code>: Imagen binarizada</li>
                            <li><code>dsize</code>: None (usa factores de escala)</li>
                            <li><code>fx</code>: 2 - Duplica ancho</li>
                            <li><code>fy</code>: 2 - Duplica alto</li>
                            <li><code>interpolation</code>: INTER_CUBIC</li>
                        </ul>
                        <strong>INTER_CUBIC:</strong>
                        <div class="ejemplo-box">
                            ‚Ä¢ Interpolaci√≥n bic√∫bica (alta calidad)<br>
                            ‚Ä¢ Mejor para ampliar im√°genes<br>
                            ‚Ä¢ Bordes m√°s suaves y definidos<br>
                            ‚Ä¢ Mejora detecci√≥n de caracteres peque√±os
                        </div>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>config OCR</h3>
                    <span class="tag">Tesseract</span>
                    <span class="tag">Configuraci√≥n</span>
                    <p>Cadena de configuraci√≥n que optimiza Tesseract espec√≠ficamente para placas vehiculares. Mejora precisi√≥n restringiendo caracteres permitidos.</p>
                    <div class="parametros">
                        <strong>Par√°metros de configuraci√≥n:</strong>
                        <div class="ejemplo-box">
                            <strong>--psm 7</strong><br>
                            ‚Üí Page Segmentation Mode 7<br>
                            ‚Üí Trata la imagen como una sola l√≠nea de texto<br>
                            ‚Üí Ideal para placas (texto horizontal)<br><br>
                            
                            <strong>-c tessedit_char_whitelist=...</strong><br>
                            ‚Üí Whitelist (lista blanca)<br>
                            ‚Üí Solo reconoce: A-Z y 0-9<br>
                            ‚Üí Ignora s√≠mbolos, puntuaci√≥n, acentos<br>
                            ‚Üí Reduce errores de reconocimiento
                        </div>
                        <strong>Ventajas:</strong>
                        <ul>
                            <li>Mayor precisi√≥n en placas</li>
                            <li>Evita confusi√≥n con s√≠mbolos</li>
                            <li>Optimizado para texto corto</li>
                        </ul>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>--psm 7</h3>
                    <span class="tag">Tesseract</span>
                    <span class="tag">Par√°metro</span>
                    <p>Page Segmentation Mode 7: Trata la imagen como una sola l√≠nea de texto. Perfecto para placas que son texto horizontal continuo.</p>
                    <div class="parametros">
                        <strong>Modos PSM comunes:</strong>
                        <div class="ejemplo-box">
                            PSM 3: Autom√°tico (por defecto)<br>
                            PSM 6: Bloque uniforme de texto<br>
                            <strong>PSM 7: L√≠nea √∫nica de texto ‚úì</strong><br>
                            PSM 8: Palabra √∫nica<br>
                            PSM 10: Car√°cter √∫nico
                        </div>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>tessedit_char_whitelist</h3>
                    <span class="tag">Tesseract</span>
                    <span class="tag">Configuraci√≥n</span>
                    <p>Restringe los caracteres que Tesseract puede reconocer. Solo permite letras may√∫sculas y n√∫meros, t√≠picos en placas vehiculares.</p>
                    <div class="parametros">
                        <strong>Whitelist definida:</strong>
                        <div class="ejemplo-box">
                            ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789<br><br>
                            
                            ‚úì Permite: ABC123, XYZ789<br>
                            ‚úó Ignora: √°√©√≠√≥√∫, !@#$%, abc (min√∫sculas)
                        </div>
                        <strong>Beneficios:</strong>
                        <ul>
                            <li>Evita confundir 'O' con '0'</li>
                            <li>Ignora s√≠mbolos que no est√°n en placas</li>
                            <li>Aumenta velocidad de reconocimiento</li>
                        </ul>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>pytesseract.image_to_string()</h3>
                    <span class="tag">Tesseract</span>
                    <p>Extrae el texto de la imagen procesada usando la configuraci√≥n optimizada. Funci√≥n principal del OCR.</p>
                    <div class="parametros">
                        <strong>Par√°metros:</strong>
                        <ul>
                            <li><code>image</code>: binaria_grande (imagen preprocesada)</li>
                            <li><code>config</code>: Configuraci√≥n personalizada con psm y whitelist</li>
                        </ul>
                        <strong>Retorna:</strong>
                        <ul>
                            <li>String con el texto detectado en la placa</li>
                        </ul>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>.strip().replace()</h3>
                    <span class="tag">Python</span>
                    <span class="tag">M√©todo String</span>
                    <p>Cadena de m√©todos que limpia el texto extra√≠do. Elimina espacios, saltos de l√≠nea y otros caracteres no deseados.</p>
                    <div class="parametros">
                        <strong>Proceso de limpieza:</strong>
                        <div class="ejemplo-box">
                            Texto OCR: " ABC 123 \n"<br><br>
                            
                            .strip()<br>
                            ‚Üí "ABC 123 \n" (sin espacios externos)<br><br>
                            
                            .replace(" ", "")<br>
                            ‚Üí "ABC123\n" (sin espacios internos)<br><br>
                            
                            .replace("\n", "")<br>
                            ‚Üí "ABC123" (sin saltos de l√≠nea)<br><br>
                            
                            <strong>Resultado final: ABC123</strong>
                        </div>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>print()</h3>
                    <span class="tag">Python</span>
                    <p>Muestra en consola la placa detectada despu√©s de todo el procesamiento y limpieza.</p>
                    <div class="parametros">
                        <strong>Salida:</strong>
                        <div class="ejemplo-box">
                            print("Placa detectada:", placa)<br>
                            ‚Üí Placa detectada: ABC123
                        </div>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>cv2.imshow() m√∫ltiples ventanas</h3>
                    <span class="tag">OpenCV</span>
                    <p>Muestra tres ventanas diferentes para visualizar el proceso de transformaci√≥n de la imagen en cada etapa.</p>
                    <div class="parametros">
                        <strong>Ventanas mostradas:</strong>
                        <div class="ejemplo-box">
                            <strong>1. "Recorte"</strong><br>
                            ‚Üí Regi√≥n de inter√©s extra√≠da<br>
                            ‚Üí Imagen a color sin procesar<br><br>
                            
                            <strong>2. "Binaria"</strong><br>
                            ‚Üí Imagen binarizada (blanco/negro)<br>
                            ‚Üí Despu√©s de umbralizaci√≥n<br><br>
                            
                            <strong>3. "Binaria Grande"</strong><br>
                            ‚Üí Imagen ampliada 2x<br>
                            ‚Üí Lista para OCR
                        </div>
                        <strong>Funci√≥n:</strong>
                        <ul>
                            <li>Permite ver el proceso completo</li>
                            <li>Ayuda a depurar problemas</li>
                            <li>Compara resultados de cada etapa</li>
                        </ul>
                    </div>
                </div>

                <div class="funcion-card">
                    <h3>cv2.waitKey()</h3>
                    <span class="tag">OpenCV</span>
                    <p>Mantiene las tres ventanas abiertas hasta que el usuario presione cualquier tecla. Permite examinar los resultados del procesamiento.</p>
                    <div class="parametros">
                        <strong>Par√°metros:</strong>
                        <ul>
                            <li><code>delay</code>: 0 (espera indefinida)</li>
                        </ul>
                    </div>
                </div>

            </div>
        </div>
    </div>
</body>
</html>